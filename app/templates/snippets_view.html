{% extends "base.html" %}

{% block head %}
    <!--<link href="/css/prettify.css" type="text/css" rel="stylesheet" />-->
    <link rel="stylesheet" href="/css/jquery-ui-flick.css?v=2">    
    <link rel="stylesheet" href="/css/highlight.css?v=2">
    <link rel="stylesheet" href="/css/tipTip.css?v=2">    
    <!--<link href="/css/sh_style.css" type="text/css" rel="stylesheet" />-->
    
{% endblock %}

{% block scripts %}
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>

<!--    <script type="text/javascript" src="/js/libs/prettify.js"></script>
-->

    <script src="/js/libs/shCore.js"></script>
    <script src="/js/libs/shBrushJava.js"></script>

<!--
    <script src="/js/libs/sh_main.js"></script>
    <script src="/js/libs/sh_java.min.js"></script>
-->

    <script>
    $(document).ready(function() {
        //prettyPrint(); 
        dp.SyntaxHighlighter.ClipboardSwf = '/flash/clipboard.swf';
        dp.SyntaxHighlighter.HighlightAll('code');
        
        // http://shjs.sourceforge.net/
        // sh_highlightDocument();

		$(".btn").button();
		$(".btn_small").button();
		
        $(".tip").tipTip({defaultPosition:"bottom", maxWidth:"140px"});

            //$("#editbox").animate({marginLeft: parseInt($("#editbox").css('marginLeft'),10) == 0 ? $("#editbox").outerWidth() : 0});            
        
        $("#btn_edit").click(function(){
            // $("#editbox").show(); //animate({marginLeft: parseInt($("#editbox").css('marginLeft'),10) == 0 ? $("#editbox").outerWidth() : 0});
            toggle_ui_to_editor(); 
        });
    });
    </script>
{% endblock %}

{% block main %}
<div id="snippet_view">
<form action="/{{ snippet.slug1 }}/edit" method="post">
            <h1>
                <div style="overflow:hidden; display:none;" id="edit_title"> <input  name="edit_title" type="text" style="width:97%;" value="{{ snippet.title }}" /></div>
                <a id="view_title" href="/{{ snippet.slug1 }}">{{ snippet.title }}</a>
            </h1>


            <div class="sidebar">
                <div style="text-align:center; float:right; padding-top:2px; margin-right:10px;">
                    <p><a href="#" class="btn_small tip" title="<p>Receive emails on updates and/or comments</p>">Follow</a></p>
                    <p><a href="#" id="btn_edit" class="btn_small tip" title="cxx">Edit</a></p>
                </div>            

                <div id="snippet_points">
                    <div class="votes"><em>2</em></div>
                    <div class="vote">        
                        <a class="teaser" href="" title="Give this snippet a point!">+1&nbsp;</a>
                    </div>
                </div>

                <div style="clear:both;"></div>

            <div id="editbox" style="display:none;">
            
                <div style="text-align:right; padding-top:2px; margin-right:10px;">
                    <p><a href="#" class="btn_small" title="<p>Receive emails on updates and/or comments</p>">Preview</a></p>
                    <p><input type="submit" id="btn_publish" class="btn_small" value="Submit" /></p>
                </div>            
                <div style="clear:both; margin-bottom:20px;"></div>
                
                <h3>Markdown Syntax</h3>
            </div>
            
                <hr>            

                <p title="Compatible Android versions" ><img src="/images/android_icon.png" style="float:right;"/> SDK: Android 1.5+</p>
                <p>Tags: Internet, System</p>

                </p> 
                <hr>
                <p><b>Editors</b></p>
                <p>
                    <a href="/authors/{{ user.nickname }}" title="author: {{ user.nickname }}"><img src="http://www.gravatar.com/avatar/{{ prefs.email_md5 }}?s=20" /></a>
                </p>

                <hr>            

                <p><b>Snippets Stats</b></p>
                    <p>This snippet has been viewed <b>1,427</b> times, it was edited <b>3</b> times
                    and has <b>17</b> followers.

                <hr>
                <p><b>Related Snippets</b></p>
.<br>
.<br>
.<br>
.<br>
.<br>
.<br>
.<br>
.<br>
                </p>
            </div>

<div>            
            
            <div class="envelope">
                <p id="view_description">{{ snippet.description }}</p>            
                <div style=" display:none;" id="edit_description">
                    <div><textarea style="width:98%;" rows="12">{{ snippet.description }}</textarea></div>
                    <div style="padding-left:4px; margin-bottom:4px; color:gray;"><small>markdown suppored</small></div>
                </div>            
                
                <div id="subtitle"><div style="float:right; padding-right:6px;">Last edit Feb. 14, 2011</div> 
                <a href="#">3 edits open for review</a></div>
            </div>

            <div id="code">
                <pre name="code" class="java">{{ snippet.code|escape }}</pre>
            </div>
            <div style="overflow:hidden; display:none;" id="edit_code">
                <div><textarea style="width:98%; padding:4px;" rows="28">{{ snippet.code }}</textarea></div>
                <div style="margin-top:20px;">
                    <a href="#" class="btn_small">Preview</a>
                    <a href="#" class="btn_small">Publish</a>
                </div>                
            </div>                
 
</div>

<div id="comments">
    <h2>{% if snippet.snippetcomment_set.count %}{{ snippet.snippetcomment_set.count }} Comments{% else %}Be the first to comment{% endif %}</h2>

    <div id="comment_thread"></div>
</div>

</form>
</div>
{% endblock %}